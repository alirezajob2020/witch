base_call:
  json:
    email: alireza@msn.com
    password: ABc123123
  response:
    headers:
    - 'Content-Type: application/json; charset=utf-8'
    - 'X-Identity: 1'
    - 'Set-Cookie: refresh-token=eyJhbGciOiJIUzI1NiIsImlhdCI6MTU5NzY2NDcxOCwiZXhwIjoxNjAwMzQzMTE4fQ.eyJpZCI6MX0.Epotmo_n866Hu3Ga4iEFg9cTtlO83PcnCG4mtogibF8;
      Max-Age=2678400; Secure'
    json:
      token: eyJhbGciOiJIUzI1NiIsImlhdCI6MTU5NzY2NDcxOCwiZXhwIjoxNTk3NzUxMTE4fQ.eyJpZCI6MSwidGl0bGUiOiJhbGl0azc3NyIsImVtYWlsIjoiYWxpcmV6YUBtc24uY29tIiwiZmlyc3ROYW1lIjoiYWxpcmV6YWEiLCJsYXN0TmFtZSI6InRhdmFrb2xpIiwic2Vzc2lvbklkIjoiZWNiYzc5MDAtOTA3OC00MGE5LWJkYjYtNzc2ZTc2MzFkOTQwIn0.XE6m1bTnYzU9aYYaqxfdu8ssG05mZt1CuD3cGYeyypc
    status: 200 OK
  title: get token
  url: /apiv1/tokens
  verb: CREATE
calls:
- json:
    email: alireza@msn.com
    password: Ss1236
  response:
    body: '{"stackTrace":"Traceback (most recent call last):\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/application.py\",
      line 110, in __call__\n    response_body = self.__root__(*remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/restfulpy\/controllers.py\",
      line 19, in __call__\n    return super().__call__(*remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/decorators.py\",
      line 133, in wrapper\n    result = func(*args, **kwargs)\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 317, in wrapper\n    return func(*args, **kwargs)\n  File \"\/home\/alireza\/workspace\/witch\/witch\/controllers\/token.py\",
      line 47, in create\n    raise HTTPIncorrectEmailOrPassword()\nwitch.exceptions.HTTPIncorrectEmailOrPassword:
      400 Incorrect Email Or Password\n"}'
    headers:
    - 'ContentType: application/json'
    status: 400 Incorrect Email Or Password
  title: Invalid password
- json:
    email: user@example.com
    password: ABc123123
  response:
    body: '{"stackTrace":"Traceback (most recent call last):\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/application.py\",
      line 110, in __call__\n    response_body = self.__root__(*remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/restfulpy\/controllers.py\",
      line 19, in __call__\n    return super().__call__(*remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/decorators.py\",
      line 133, in wrapper\n    result = func(*args, **kwargs)\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 317, in wrapper\n    return func(*args, **kwargs)\n  File \"\/home\/alireza\/workspace\/witch\/witch\/controllers\/token.py\",
      line 44, in create\n    login((email, password))\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/restfulpy\/authentication.py\",
      line 281, in login\n    principal = super().login(credentials)\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/restfulpy\/authentication.py\",
      line 175, in login\n    member = self.validate_credentials(credentials)\n  File
      \"\/home\/alireza\/workspace\/witch\/witch\/authentication.py\", line 54, in
      validate_credentials\n    member = self.safe_member_lookup(User.email == email)\n  File
      \"\/home\/alireza\/workspace\/witch\/witch\/authentication.py\", line 18, in
      safe_member_lookup\n    raise HTTPStatus(''400 Incorrect Email Or Password'')\nnanohttp.exceptions.HTTPStatus:
      400 Incorrect Email Or Password\n"}'
    headers:
    - 'ContentType: application/json'
    status: 400 Incorrect Email Or Password
  title: Not exist email
- json:
    email: user.com
    password: ABc123123
  response:
    body: '{"stackTrace":"Traceback (most recent call last):\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/application.py\",
      line 110, in __call__\n    response_body = self.__root__(*remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/restfulpy\/controllers.py\",
      line 19, in __call__\n    return super().__call__(*remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/controllers.py\",
      line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/decorators.py\",
      line 133, in wrapper\n    result = func(*args, **kwargs)\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 316, in wrapper\n    validator(form=context.form, query=context.query)\n  File
      \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 234, in __call__\n    field.validate(form)\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 55, in validate\n    criterion.validate(self, container)\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 89, in validate\n    field\n  File \"\/home\/alireza\/.virtualenvs\/witch\/lib\/python3.6\/site-packages\/nanohttp\/validation.py\",
      line 211, in _validate\n    raise self.create_exception()\nnanohttp.exceptions.HTTPBadRequest:
      400 Invalid Email Format\n"}'
    headers:
    - 'ContentType: application/json'
    status: 400 Invalid Email Format
  title: Invalid email format
- json: {}
  response:
    body: "Traceback (most recent call last):\n  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/application.py\"\
      , line 110, in __call__\n    response_body = self.__root__(*remaining_paths)\n\
      \  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/restfulpy/controllers.py\"\
      , line 19, in __call__\n    return super().__call__(*remaining_paths)\n  File\
      \ \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/controllers.py\"\
      , line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n\
      \  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/controllers.py\"\
      , line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n\
      \  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/controllers.py\"\
      , line 109, in __call__\n    return self._serve_handler(handler, remaining_paths)\n\
      \  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/controllers.py\"\
      , line 103, in _serve_handler\n    return handler(*remaining_paths, **kwargs)\n\
      \  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/controllers.py\"\
      , line 108, in __call__\n    self._validate_handler(handler, remaining_paths)\n\
      \  File \"/home/alireza/.virtualenvs/witch/lib/python3.6/site-packages/nanohttp/controllers.py\"\
      , line 67, in _validate_handler\n    else '400 Empty Form'\nnanohttp.exceptions.HTTPStatus:\
      \ 400 Empty Form\n"
    headers:
    - 'ContentType: text/plain;charset=utf-8'
    status: 400 Empty Form
  title: Trying to pass with empty form
